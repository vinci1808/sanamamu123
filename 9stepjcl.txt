//DSRP013T JOB ABCD,'1234',MSGLEVEL=(1,1),
//             MSGCLASS=X,CLASS=A,NOTIFY=&SYSUID
//STEP1    EXEC PGM=IDCAMS
//SYSPRINT DD SYSOUT=*
//SYSIN    DD *
 /* IDCAMS COMMAND */
 DELETE DSRP013.VSAM.EMPLOYEE CLUSTER PURGE
 SET MAXCC=0
 DEFINE CLUSTER (NAME(DSRP013.VSAM.EMPLOYEE) -
        TRACKS(1 1) -
        KEYS(5 0) -
        RECORDSIZE(80 80) -
        INDEXED -
        ) -
        DATA (NAME(DSRP013.VSAM.EMPLOYEE.DATA) -
        ) -
        INDEX (NAME(DSRP013.VSAM.EMPLOYEE.INDEX) -
        )
/*
//STEP2    EXEC PGM=SORT
//SYSOUT   DD SYSOUT=*
//SORTIN   DD DSN=DSRP013.VSAM.EMPFILE2,DISP=SHR
//SORTOUT  DD DSN=&&TEMP,DISP=(NEW,PASS),
//            SPACE=(TRK,(1,1),RLSE),
//            DCB=(RECFM=FB,LRECL=80,BLKSIZE=8000)
//SYSIN    DD *
    SORT FIELDS=(1,5,CH,A)
    SUM FIELDS=NONE
/*
//STEP3    EXEC PGM=IDCAMS
//SYSPRINT DD SYSOUT=*
//PSFILE   DD DSN=&&TEMP,DISP=SHR
//KSDSFILE DD DSN=DSRP013.VSAM.EMPLOYEE,DISP=SHR
//SYSIN    DD *
   REPRO INFILE(PSFILE) -
        OUTFILE(KSDSFILE)
/*
//STEP4    EXEC PGM=IDCAMS
//SYSPRINT DD SYSOUT=*
//SYSIN    DD *
 /* IDCAMS COMMAND */
 DELETE DSRP013.VSAM.EMPLOYEE.LOCAIX AIX PURGE
 SET MAXCC=0
 DEFINE ALTERNATEINDEX (NAME(DSRP013.VSAM.EMPLOYEE.LOCAIX) -
        RELATE(DSRP013.VSAM.EMPLOYEE)-
        TRACKS(1 1) -
        RECORDSIZE(23 38) -
        KEYS(3 20) -
        NONUNIQUEKEY -
        ) -
        DATA (NAME(DSRP013.VSAM.EMPLOYEE.LOCAIX.DATA) -
        ) -
        INDEX (NAME(DSRP013.VSAM.EMPLOYEE.LOCAIX.INDEX) -
        )
//STEP5    EXEC PGM=IDCAMS
//SYSPRINT DD SYSOUT=*
//BASE0    DD DSN=DSRP013.VSAM.EMPLOYEE,DISP=SHR
//AIX1     DD DSN=DSRP013.VSAM.EMPLOYEE.LOCAIX,DISP=SHR
//SYSIN    DD *
 BLDINDEX INFILE(BASE0) -
          OUTFILE(AIX1)
/*
//STEP6    EXEC PGM=IDCAMS
//SYSPRINT DD SYSOUT=*
//SYSIN    DD *
 DELETE DSRP013.VSAM.EMPLOYEE.LOCAIX.PATH PATH PURGE
 SET MAXCC=0
 DEFINE PATH (NAME(DSRP013.VSAM.EMPLOYEE.LOCAIX.PATH) -
        PATHENTRY(DSRP013.VSAM.EMPLOYEE.LOCAIX) -
        UPDATE )
/*
//STEP7    EXEC PGM=IDCAMS
//SYSPRINT DD SYSOUT=*
//SYSIN    DD *
 /* IDCAMS COMMAND */
 DELETE DSRP013.VSAM.EMPLOYEE.TECHAIX AIX PURGE
 SET MAXCC=0
 DEFINE ALTERNATEINDEX (NAME(DSRP013.VSAM.EMPLOYEE.TECHAIX) -
        RELATE(DSRP013.VSAM.EMPLOYEE)-
        TRACKS(1 1) -
        RECORDSIZE(23 38) -
        KEYS(4 31) -
        NONUNIQUEKEY -
        ) -
        DATA (NAME(DSRP013.VSAM.EMPLOYEE.TECHAIX.DATA) -
        ) -
        INDEX (NAME(DSRP013.VSAM.EMPLOYEE.TECHAIX.INDEX) -
        )
//STEP8    EXEC PGM=IDCAMS
//SYSPRINT DD SYSOUT=*
//BASE0    DD DSN=DSRP013.VSAM.EMPLOYEE,DISP=SHR
//AIX1     DD DSN=DSRP013.VSAM.EMPLOYEE.TECHAIX,DISP=SHR
//SYSIN    DD *
 BLDINDEX INFILE(BASE0) -
          OUTFILE(AIX1)
/*
//STEP9    EXEC PGM=IDCAMS
//SYSPRINT DD SYSOUT=*
//SYSIN    DD *
 DELETE DSRP013.VSAM.EMPLOYEE.TECHAIX.PATH PATH PURGE
 SET MAXCC=0
 DEFINE PATH (NAME(DSRP013.VSAM.EMPLOYEE.TECHAIX.PATH) -
        PATHENTRY(DSRP013.VSAM.EMPLOYEE.TECHAIX) -
        UPDATE )
/*
